before_script:
    - chmod +x gradlew

build:
  stage: build
  script:
    - ./gradlew build
  artifacts:
    paths:
    - build/reports/
    when: on_failure
    expire_in: 1 week

ltlcross-ltl2ldba:
  stage: test
  script:
    - ./gradlew distTar
    - tar xvf build/distributions/translations-0.0.4.tar
    - randltl -n 100 a b c d e --tree-size=10..40 | ltlfilt --nnf -o formulas/rand.ltl
    - ltlcross --stop-on-error --timeout=300 -F "formulas/check.ltl" -F "formulas/rand.ltl" '{spot} ltl2tgba -H -f %f >%O' '{ltl2ldba} translations-0.0.4/bin/ltl2ldba %f >%O'

ltlcross-ltl2ldgba:
  stage: test
  script:
    - ./gradlew distTar
    - tar xvf build/distributions/translations-0.0.4.tar
    - ltlcross --stop-on-error --timeout=300 -F "formulas/check.ltl" '{spot} ltl2tgba -H -f %f >%O' '{ltl2ldba} translations-0.0.4/bin/ltl2ldgba %f >%O'

ltlcross-ltl2parity:
  stage: test
  script:
    - ./gradlew distTar
    - tar xvf build/distributions/translations-0.0.4.tar
    - ltlcross --stop-on-error --timeout=300 -F "formulas/check.ltl" '{spot} ltl2tgba -H -f %f >%O' '{ltl2parity} translations-0.0.4/bin/ltl2parity %f >%O'